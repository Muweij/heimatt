<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <input type="text" id="input"></input>
  <div id="text"></div>
</body>
<script>
  let data = {
    name: '张三'
  }
  // Object.defineProperty 接受三个参数 
  // 第一个参数是 要监听的对象 
  // 第二个参数是 监听对象中的属性
  // 第三个参数是一个对象 对象中定义了 get set 方法

  // 在set 和get中间建立的桥梁
  let vName = ''
  // 一、数据层到视图层 改变
  // 1、修改数据
  // 2、触发dom的值的改变
  Object.defineProperty(data, 'name', {
    get() {
      console.log('获取name属性的时候会触发我');
      return vName
    },
    set(val) {
      console.log('修改name属性的时候会触发我');
      console.log('我被修改成了' + val);
      // 将回调参数val显示在input上
      // console.log(document.querySelector('#input'));
      document.querySelector('#input').value = val
      document.querySelector('#text').innerText = val
      vName = val
    }
  })
  // 视图层到数据层 改变
  // 1、拿到输入框中改变之后的值
  // 2、对data.name做赋值
  document.querySelector('#input').addEventListener('input', (e) => {
    console.log(e.target.value);
    data.name = e.target.value
  })
</script>

</html>